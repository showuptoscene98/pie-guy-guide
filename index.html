<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Pie Guy Guide</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body data-theme="dark-red">
  <!-- Startup: character + server (shown via Connect on LFG page) -->
  <div class="startup-modal hidden" id="startupModal">
    <div class="startup-modal-backdrop"></div>
    <div class="startup-modal-box">
      <h2 class="startup-modal-title">Welcome to Pie Guy Guide</h2>
      <p class="startup-modal-desc">Enter your character name and server to continue. You can change these later in Options.</p>
      <div class="startup-modal-form">
        <label for="startupCharacterName">Character name</label>
        <input type="text" id="startupCharacterName" placeholder="Your in-game character name" aria-label="Character name" required />
        <label for="startupServer">Server</label>
        <select id="startupServer" aria-label="Server">
          <option value="1">Miraverre</option>
          <option value="2">Strekios</option>
          <option value="3">Dreva</option>
          <option value="4">Arisetsu</option>
        </select>
        <p class="startup-modal-error hidden" id="startupModalError"></p>
        <div class="startup-modal-buttons">
          <button type="button" class="primary startup-modal-btn" id="startupSubmitBtn">Continue</button>
          <button type="button" class="startup-modal-btn startup-modal-skip" id="startupSkipBtn">I'm not interested in LFG currently</button>
        </div>
        <p class="startup-modal-esc muted">Press <kbd>ESC</kbd> to close without setting.</p>
      </div>
    </div>
  </div>

  <div class="app">

    <!-- Topbar (drag region) -->
    <div class="topbar">
      <div class="topbar-left">
        <div class="topbar-title">Pie Guy Guide</div>
        <div class="topbar-sub">Project Gorgon Companion</div>
      </div>

      <div class="topbar-search-wrap" id="wikiSearchWrap">
        <input type="search" class="topbar-search" id="wikiSearchInput" placeholder="Search Project Gorgon Wiki…" autocomplete="off" />
        <div class="topbar-search-results hidden" id="wikiSearchResults"></div>
      </div>

      <div class="topbar-controls">
        <div class="options-wrap">
          <button type="button" class="topbtn topbtn-options" id="optionsCogBtn" title="Options" aria-label="Options">⚙</button>
          <div class="options-dropdown hidden" id="optionsDropdown">
            <div class="options-dropdown-title">Options</div>
            <label class="options-dropdown-item">
              <input type="checkbox" id="optionAnchorOverlays" checked />
              <span>Anchor map & dungeon to top right</span>
            </label>
            <div class="options-dropdown-item options-lfg-row">
              <label for="optionLfgPlayerName">Your in-game name (LFG)</label>
              <input type="text" id="optionLfgPlayerName" placeholder="Character name" aria-label="Your in-game name for LFG" />
            </div>
            <div class="options-dropdown-item options-lfg-row">
              <label for="optionLfgServerUrl">LFG server URL</label>
              <input type="url" id="optionLfgServerUrl" placeholder="https://edmxyxwphjnspowcefkp.supabase.co/auth/v1/callback" aria-label="LFG API base URL" />
            </div>
            <div class="options-dropdown-item options-lfg-row">
              <label for="optionLfgServer">Game server</label>
              <select id="optionLfgServer" aria-label="Game server">
                <option value="1">Miraverre</option>
                <option value="2">Strekios</option>
                <option value="3">Dreva</option>
                <option value="4">Arisetsu</option>
              </select>
            </div>
            <div class="options-dropdown-item options-theme-row">
              <label for="optionTheme">Theme</label>
              <select id="optionTheme" aria-label="Theme">
                <option value="dark">Dark Mode</option>
                <option value="dark-red" selected>Dark Red</option>
                <option value="normal">Normal</option>
                <option value="ocean">Ocean</option>
                <option value="forest">Forest</option>
                <option value="purple">Purple</option>
                <option value="sunset">Sunset</option>
                <option value="slate">Slate</option>
              </select>
            </div>
            <div class="options-dropdown-item options-account-row" id="optionsAccountRow" style="display: none;">
              <div class="options-dropdown-title" style="margin-top: 8px;">Account</div>
              <div id="authLoggedOut">
                <button type="button" class="primary auth-btn" id="authLoginBtn">Login with Discord</button>
              </div>
              <div id="authLoggedIn" style="display: none;">
                <p class="auth-user-line"><span id="authUserName">—</span> <button type="button" class="auth-signout-btn" id="authSignOutBtn">Sign out</button></p>
              </div>
            </div>
          </div>
        </div>
        <button type="button" class="topbtn" onclick="window.api?.mainMinimize?.()">—</button>
        <button type="button" class="topbtn danger" onclick="window.api?.mainClose?.()">✕</button>
      </div>
    </div>

    <div class="layout">
      <!-- Hover-slide sidebar -->
      <aside class="sidebar" aria-label="Sidebar Navigation">
        <div class="side-head">
          <img src="assets/logo.png" class="logo" alt="Pie Guy" draggable="false" />
          <div class="brand">
            <div class="brand-name">Pie Guy</div>
            <div class="brand-sub">Guide & Overlays</div>
          </div>
        </div>

        <nav class="nav">
          <button class="navBtn" id="navHome" onclick="go('home')">
            <img class="icon" src="assets/icons/home.png" alt="" draggable="false" />
            <span class="label">Home</span>
          </button>

          <button class="navBtn" id="navMaps" onclick="go('maps')">
            <img class="icon" src="assets/icons/maps.png" alt="" draggable="false" />
            <span class="label">Maps</span>
          </button>

          <button class="navBtn" id="navDungeons" onclick="go('dungeons')">
            <img class="icon" src="assets/icons/dungeons.png" alt="" draggable="false" />
            <span class="label">Dungeons</span>
          </button>

          <button class="navBtn" id="navLeveling" onclick="go('leveling')">
            <img class="icon" src="assets/icons/leveling.png" alt="" draggable="false" />
            <span class="label">Leveling</span>
          </button>

          <button class="navBtn" id="navBossTimer" onclick="go('boss-timer')">
            <img class="icon" src="assets/icons/Boss_Timer.png" alt="" draggable="false" />
            <span class="label">Boss Timer</span>
          </button>

          <button class="navBtn" id="navLfg" onclick="go('lfg')">
            <img class="icon" src="assets/icons/Casino_Daily.png" alt="" draggable="false" />
            <span class="label">LFG</span>
          </button>

          <button class="navBtn" id="navCasinoDaily" onclick="go('casino-daily')">
            <img class="icon" src="assets/icons/Casino_Daily.png" alt="" draggable="false" />
            <span class="label">Casino Daily</span>
          </button>

          <button class="navBtn" id="navTips" onclick="go('tips')">
            <img class="icon" src="assets/icons/tips.png" alt="" draggable="false" />
            <span class="label">Tips</span>
          </button>

          <button class="navBtn" id="navInstructions" onclick="go('instructions')">
            <img class="icon" src="assets/icons/Instructions.png" alt="" draggable="false" />
            <span class="label">Instructions</span>
          </button>

          <button class="navBtn" id="navAbout" onclick="go('about')">
            <img class="icon" src="assets/icons/about.png" alt="" draggable="false" />
            <span class="label">About</span>
          </button>
        </nav>

        <div class="side-foot">
          <div class="sidebar-opacity">
            <label for="opacitySlider" class="sidebar-opacity-label">Opacity</label>
            <input type="range" id="opacitySlider" class="sidebar-opacity-slider" min="30" max="100" value="100" />
            <span class="sidebar-opacity-value" id="opacityValue">100%</span>
          </div>
          <div class="hotkeys">
            <div class="hotkeys-title">Hotkeys</div>
            <div>F7: Minimize/Restore</div>
            <div>Overlay: ESC closes, F6 show selection &amp; window, F8 click-through</div>
          </div>
        </div>
      </aside>

      <!-- Main content area -->
      <main class="content">
        <section class="page" id="page-home">
          <h1>Home</h1>
          <p>Welcome to Pie Guy Guide. Use the sidebar to navigate.</p>
          <div class="home-updates">
            <div class="home-updates-brand">
              <img src="assets/logo.png" alt="Pie Guy" class="home-updates-logo" />
              <h2 class="home-updates-patch-title">Patch notes</h2>
            </div>
            <p class="home-updates-patch-subtitle muted">Project Gorgon update notes — expand an entry to read.</p>
            <div class="home-updates-head">
              <button type="button" class="primary home-updates-refresh" id="pgNewsRefresh">Refresh</button>
            </div>
            <div class="home-updates-list" id="pgNewsList">
              <div class="home-updates-loading muted hidden" id="pgNewsLoading">Loading update notes…</div>
              <div class="home-updates-error hidden" id="pgNewsError"></div>
            </div>
          </div>
        </section>

        <section class="page" id="page-maps">
          <h1>Maps</h1>
          <p>Click to open the map overlay. Main app minimizes until you press ESC.</p>
          <div class="row row-gap">
            <div>
              <label for="currentMapZoneSelect" class="block-label">Current zone (player location)</label>
              <select id="currentMapZoneSelect" aria-label="Current zone"></select>
            </div>
            <button type="button" class="primary" onclick="window.api?.openMap?.()">Open Map Overlay</button>
          </div>
          <p class="muted">Set your current zone to show a player icon on the map overlay when that map is open.</p>
          <p class="muted">Map images are updated as new resources become available.</p>
        </section>

        <section class="page" id="page-dungeons">
          <h1>Dungeons</h1>
          <p>Future dungeon layouts will be added as new dungeons are released.</p>
          <div class="row row-gap">
            <div>
              <label for="currentDungeonZoneSelect" class="block-label">Current dungeon (player location)</label>
              <select id="currentDungeonZoneSelect" aria-label="Current dungeon"></select>
            </div>
            <button type="button" class="primary" onclick="window.api?.openDungeon?.()">Open Dungeon Overlay</button>
          </div>
          <p class="muted">Set your current dungeon to show a player icon on the dungeon overlay when that dungeon is open.</p>
        </section>

<section class="page" id="page-leveling">
  <div class="leveling-header">
    <div class="leveling-header-text">
      <h1>Leveling Guide</h1>
      <p class="muted">Best areas by level bracket. Expand a bracket to read details; use the quick reference for a summary.</p>
    </div>
    <button type="button" class="primary leveling-quick-ref-btn" onclick="window.api?.openLevelingQuickRef?.()" aria-label="Open quick reference in popout window">Quick reference</button>
  </div>

  <div class="leveling-guide-body">
    <div class="leveling-tips">
      <h2>General tips</h2>
      <ul>
        <li>Fight mobs within about <strong>5 levels</strong> of your skill level for good XP.</li>
        <li>Use <strong>both equipped combat skills</strong> at least once every 60 seconds to maximize gains.</li>
        <li><strong>Bury corpses</strong> in busy areas (buy a shovel on the island); not burying is bad etiquette.</li>
        <li>Focus on <strong>stackable, valuable drops</strong> (e.g. strange dirt, femurs, spider webs) when farming.</li>
        <li>Kill <strong>silver crown mobs</strong> for kill quests and extra XP while you grind.</li>
      </ul>
    </div>

    <div class="leveling">
      <details class="lvl" open>
        <summary>0–10 — Anagoge Island</summary>
        <div class="lvlBody">
          <p>Stay on <strong>Anagoge Island</strong> until your combat skills are at least <strong>10</strong>. After level 5, use the island dungeon and the <strong>spider cave</strong> (large, excellent for grinding). Focus on stackables: strange dirt, femurs, spider webs.</p>
          <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="AnagogeIsland">View map</button></p>
        </div>
      </details>

      <details class="lvl">
        <summary>5–20 — Serbule &amp; Serbule Hills</summary>
        <div class="lvlBody">
          <div class="leveling-area-dropdown-wrap">
            <label for="lvl-5-20-area" class="leveling-area-label">Area</label>
            <select id="lvl-5-20-area" class="leveling-area-select" aria-label="Choose area">
              <option value="hills">Serbule Hills</option>
              <option value="crypt">Serbule Crypt</option>
              <option value="sewers">Serbule Sewers</option>
            </select>
          </div>
          <div class="leveling-area-content" data-area="hills">
            <p><strong>5–10:</strong> Pigs east of Serbule, or Serbule Hills (spiders, pigs, sheep, goblins). At 10+ you can move more freely; avoid Renalon, farm goblins.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="SerbuleHills">View map</button></p>
          </div>
          <div class="leveling-area-content" data-area="crypt">
            <p><strong>Serbule Crypt</strong> (SW of Serbule). Outdoor skeletons (e.g. archers) are easy. Indoors: spiders and harder undead up to ~20. The hallway with deer, ice elementals, and undead (between the giant undead boss and the rhino) is a strong grind spot with less traffic.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-dungeon-zone="Serbule Crypt">View dungeon map</button></p>
          </div>
          <div class="leveling-area-content" data-area="sewers">
            <p><strong>Serbule Sewers</strong> — viable for levels 5–15. Smaller than the crypt but good if you prefer this layout.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="Serbule">View map</button></p>
          </div>
        </div>
      </details>

      <details class="lvl">
        <summary>20–40 — Eltibule &amp; dungeons</summary>
        <div class="lvlBody">
          <div class="leveling-area-dropdown-wrap">
            <label for="lvl-20-40-area" class="leveling-area-label">Area</label>
            <select id="lvl-20-40-area" class="leveling-area-select" aria-label="Choose area">
              <option value="eltibule">Eltibule</option>
              <option value="myconian">Myconian Cave (25–30)</option>
              <option value="goblin">Goblin Dungeon (30–45)</option>
              <option value="sunvale">Sun Vale</option>
            </select>
          </div>
          <div class="leveling-area-content" data-area="eltibule">
            <p>From the drop, <strong>stay left</strong>. Wolves, panthers, green spiders, fire spiders (fire spiders can be tough at first). Good time to level mycology, myconic, and foraging. Watch for silver crown mobs for kill quests.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="Eltibule">View map</button></p>
          </div>
          <div class="leveling-area-content" data-area="myconian">
            <p>Requires <strong>8 myconic</strong> (10 recommended). Enter via large mushrooms in northern Serbule (locations change every few hours). Avoid bosses without a group — their curses are harsh.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-dungeon-zone="Myconian Cave">View dungeon map</button></p>
          </div>
          <div class="leveling-area-content" data-area="goblin">
            <p>One of the best dungeons: large, clear difficulty curve (easier up top, harder as you descend). Strong for 30–45. With a group that can handle the Fog: after the split go <strong>left</strong> to the three rooms with elementals and red crystals; <strong>leave the crystals alive</strong> for fast respawns and strong group XP.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-dungeon-zone="Goblin Dungeon Upper">View dungeon map</button></p>
          </div>
          <div class="leveling-area-content" data-area="sunvale">
            <p><strong>Sun Vale</strong> — island chain alternative for roughly 20–40 with multiple dungeon options.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="Sun Vale">View map</button></p>
          </div>
        </div>
      </details>

      <details class="lvl">
        <summary>40–60 — Kur</summary>
        <div class="lvlBody">
          <div class="leveling-area-dropdown-wrap">
            <label for="lvl-40-60-area" class="leveling-area-label">Area</label>
            <select id="lvl-40-60-area" class="leveling-area-select" aria-label="Choose area">
              <option value="tower">Kur Tower</option>
              <option value="mountains">Kur Mountains (outdoor)</option>
            </select>
          </div>
          <div class="leveling-area-content" data-area="tower">
            <p><strong>Kur Tower</strong> — portal is a short run from the Kur portal drop in Eltibule. No cold damage inside; often has players for groups. One of the best 40–60 grinds.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-dungeon-zone="Kur Tower">View dungeon map</button></p>
          </div>
          <div class="leveling-area-content" data-area="mountains">
            <p><strong>Kur Mountains</strong> (outdoor) — roughly 35–50. Manage cold and body heat. Use when you want overworld variety.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="Kur Mountains">View map</button></p>
          </div>
        </div>
      </details>

      <details class="lvl">
        <summary>60–70 — Wolf Cave</summary>
        <div class="lvlBody">
          <p><strong>Wolf Cave</strong> in Kur. Skin werewolves (keep a skinning knife) for solid income while leveling.</p>
          <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-dungeon-zone="Wolf Cave">View dungeon map</button></p>
        </div>
      </details>

      <details class="lvl">
        <summary>60–75 — Ilmari &amp; Rahu</summary>
        <div class="lvlBody">
          <div class="leveling-area-dropdown-wrap">
            <label for="lvl-60-75-area" class="leveling-area-label">Area</label>
            <select id="lvl-60-75-area" class="leveling-area-select" aria-label="Choose area">
              <option value="ilmari">Ilmari</option>
              <option value="rahu">Rahu</option>
            </select>
          </div>
          <div class="leveling-area-content" data-area="ilmari">
            <p><strong>Ilmari</strong> — desert; manage hydration (dehydration hurts power regen and sprint). Town: Amulna. Manticore Fields and ruined villages for harder fights.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="Ilmari">View map</button></p>
          </div>
          <div class="leveling-area-content" data-area="rahu">
            <p><strong>Rahu</strong> — coastal town; plateau has high-level mobs and large aggro ranges. Come prepared.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="Rahu">View map</button></p>
          </div>
        </div>
      </details>

      <details class="lvl">
        <summary>70–80 — Gazluk &amp; Fae Realm</summary>
        <div class="lvlBody">
          <div class="leveling-area-dropdown-wrap">
            <label for="lvl-70-80-area" class="leveling-area-label">Area</label>
            <select id="lvl-70-80-area" class="leveling-area-select" aria-label="Choose area">
              <option value="gazluk">Gazluk</option>
              <option value="fae">Fae Realm</option>
            </select>
          </div>
          <div class="leveling-area-content" data-area="gazluk">
            <p><strong>Gazluk</strong> — on Gazluk Plateau past Kur. Harsh climate; orcs and tough beasts. Roughly 70–75.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="Gazluk">View map</button></p>
          </div>
          <div class="leveling-area-content" data-area="fae">
            <p><strong>Fae Realm</strong> — alternate realm via fairy nexuses. High-level option, roughly 70–80.</p>
            <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="Fae Realm">View map</button></p>
          </div>
        </div>
      </details>

      <details class="lvl">
        <summary>75–85 — Povus</summary>
        <div class="lvlBody">
          <p><strong>Povus</strong> — swamp merchant zone and one of the highest-level areas. Suited to 75–85 and endgame play.</p>
          <p class="leveling-view-map-wrap"><button type="button" class="leveling-view-map-btn" data-map-zone="Povus">View map</button></p>
        </div>
      </details>
    </div>
  </div>
</section>

        <section class="page" id="page-lfg">
          <h1>LFG / Group finder</h1>
          <p>Find or form groups by server. Set <strong>LFG server URL</strong> in Options (gear) if needed.</p>
          <button type="button" class="primary lfg-connect-btn" id="lfgConnectBtn">Connect</button>
          <div class="lfg-server-tabs" role="tablist" aria-label="Server">
            <button type="button" class="lfg-tab active" data-server="1" role="tab" aria-selected="true">Miraverre</button>
            <button type="button" class="lfg-tab" data-server="2" role="tab" aria-selected="false">Strekios</button>
            <button type="button" class="lfg-tab" data-server="3" role="tab" aria-selected="false">Dreva</button>
            <button type="button" class="lfg-tab" data-server="4" role="tab" aria-selected="false">Arisetsu</button>
          </div>
          <div class="lfg-create-wrap">
            <h2 class="lfg-section-title">Create a post</h2>
            <div class="lfg-create-row">
              <input type="text" id="lfgPostTitle" class="lfg-input" placeholder="e.g. LFG Winter Nexus Daily" aria-label="Post title" />
              <label for="lfgPostSlots" class="lfg-slots-label">Slots</label>
              <input type="number" id="lfgPostSlots" class="lfg-slots-input" min="1" max="20" value="4" aria-label="Number of slots" />
              <button type="button" class="primary lfg-btn" id="lfgCreateBtn">Create post</button>
            </div>
            <div class="lfg-create-description">
              <label for="lfgPostDescription">Description</label>
              <textarea id="lfgPostDescription" class="lfg-description-input" placeholder="Optional details…" rows="2" aria-label="Post description"></textarea>
            </div>
            <div class="lfg-create-tags">
              <span class="lfg-create-tags-label">Tags</span>
              <div class="lfg-create-tags-list" id="lfgPostTagsList"></div>
            </div>
            <div class="lfg-create-language">
              <label for="lfgPostLanguage">Language</label>
              <select id="lfgPostLanguage" class="lfg-language-select" aria-label="Language">
                <option value="English">English</option>
                <option value="Spanish">Spanish</option>
                <option value="Russian">Russian</option>
                <option value="Portuguese">Portuguese</option>
              </select>
            </div>
          </div>
          <div class="lfg-list-wrap">
            <h2 class="lfg-section-title">Posts</h2>
            <div class="lfg-filters-row">
              <label for="lfgFilterTag" class="lfg-filter-label">Tag</label>
              <select id="lfgFilterTag" class="lfg-filter-select" aria-label="Filter by tag">
                <option value="">All</option>
                <option value="Casino Daily">Casino Daily</option>
                <option value="Grinding">Grinding</option>
                <option value="Unlocking Content">Unlocking Content</option>
                <option value="Questing">Questing</option>
              </select>
              <label for="lfgFilterLanguage" class="lfg-filter-label">Language</label>
              <select id="lfgFilterLanguage" class="lfg-filter-select" aria-label="Filter by language">
                <option value="">All</option>
                <option value="English">English</option>
                <option value="Spanish">Spanish</option>
                <option value="Russian">Russian</option>
                <option value="Portuguese">Portuguese</option>
              </select>
              <button type="button" class="primary lfg-btn" id="lfgRefreshBtn">Refresh</button>
            </div>
            <div class="lfg-posts-list" id="lfgPostsList">
              <div class="lfg-loading muted hidden" id="lfgLoading">Loading…</div>
              <div class="lfg-error hidden" id="lfgError"></div>
            </div>
          </div>
        </section>

        <section class="page" id="page-boss-timer">
          <h1>Boss Timer</h1>
          <p>Track when bosses respawn. Click <strong>Killed</strong> when you or your group kill a boss to start the timer.</p>
          <h2 class="boss-timer-section-title">Bosses</h2>
          <div class="boss-timer-list" id="bossTimerList"></div>
          <p class="muted" style="margin-top:12px;">Timers are saved locally. Respawn times are estimates; adjust in the dropdown (5, 8, or 14 min) if needed.</p>
        </section>

        <section class="page" id="page-casino-daily">
          <h1>Casino Daily</h1>
          <p>The casino daily dungeon rotates at <strong>11pm CST</strong> every day.</p>
          <div class="casino-daily-box" id="casinoDailyBox">
            <div class="casino-daily-dungeon" id="casinoDailyDungeon">—</div>
            <div class="casino-daily-next" id="casinoDailyNext"></div>
          </div>
        </section>

        <section class="page" id="page-tips">
          <h1>Tips</h1>
          <ul>
            <li>Keep food buffs up for faster progress and health regen.</li>
            <li>Train foraging alongside combat this will help in the endgame.</li>
            <li>Sell often to keep inventory clean and free up space be mindful of the npc you sell they have limited coins</li>
          </ul>
          <details class="lvl tips-dropdown">
            <summary>Vendors Council — when does sell limit reset? <button type="button" class="tips-pin-btn" onclick="event.preventDefault(); event.stopPropagation(); window.api?.openTipsVendorsCouncilPopup?.();" aria-label="Open in popup window">Open in window</button></summary>
            <div class="lvlBody">
              <p>Vendor cash (how much you can sell to them) resets on a <strong>rolling 7-day timer per merchant</strong>, not a fixed weekly reset.</p>
              <p><strong>How it works:</strong> Each vendor's cash pool resets 7 days after your <strong>first sale to that vendor</strong> in the current cycle. For example, if you first sell to a vendor on Monday at 3 PM, their cash resets the following Monday at 3 PM. There is no server-wide reset day.</p>
              <p><strong>Check your reset:</strong> Hover your cursor over the merchant's <strong>Council amount</strong> in the UI — a tooltip shows exactly when that vendor's cash will reset.</p>
              <p>Each merchant's timer is independent (selling to one doesn't affect another). You can rotate between vendors to work around limits. Higher <strong>Favor</strong> with a merchant increases their max cash pool so you can sell more before they run dry.</p>
            </div>
          </details>
          <details class="lvl tips-dropdown">
            <summary>Who buys what — NPC shops by area <button type="button" class="tips-pin-btn" onclick="event.preventDefault(); event.stopPropagation(); window.api?.openTipsWhoBuysPopup?.();" aria-label="Open in popup window">Open in window</button></summary>
            <div class="lvlBody tips-npc-list">
              <p class="muted">Shopkeepers by area; what they buy is listed to the right. Council pool (start → max at Soul Mates) shown only when on wiki.</p>
              <div class="tips-npc-search-wrap">
                <label for="tipsNpcSearch" class="tips-npc-search-label">Search</label>
                <input type="search" id="tipsNpcSearch" class="tips-npc-search-input" placeholder="Search areas or NPCs (e.g. Hulon, Serbule, armor)…" aria-label="Search areas or NPCs" />
              </div>
              <div class="tips-area-list" id="tipsAreaList">
                <details class="lvl tips-area-details" data-area="Serbule">
                  <summary>Serbule</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Azalak</td><td>10k→35k</td><td>Misc: potions, bones, animal remnants, drugs</td></tr>
                        <tr><td>Charles Thompson</td><td>7.5k→60k</td><td>Misc: potions, bones, mushrooms</td></tr>
                        <tr><td>Elahil</td><td>5k→30k</td><td>Misc: recipes, cooking ingredients, food</td></tr>
                        <tr><td>Fainor</td><td>10k→120k</td><td>Misc: books, poetry, scrolls, recipes; everything else reduced</td></tr>
                        <tr><td>Flia</td><td></td><td>Misc: everything reduced, alchemy, gems, food, potions</td></tr>
                        <tr><td>Harry the Wolf</td><td>5k→60k</td><td>Misc: scrolls, books, recipes; everything reduced</td></tr>
                        <tr><td>Hulon</td><td>5k→60k</td><td>Armor, weapons</td></tr>
                        <tr><td>Joeh</td><td>5k→50k</td><td>Armor, weapons; jewelry, crystals, gems</td></tr>
                        <tr><td>Larsan</td><td>10k→120k</td><td>Jewelry; scrolls, recipes, books, poetry</td></tr>
                        <tr><td>Leonard Allenson</td><td>2k→4k</td><td>Everything (limited pool)</td></tr>
                        <tr><td>Marna</td><td>5k→60k</td><td>Misc: mushrooms, skulls, suspensions, remnants; everything at full (limited)</td></tr>
                        <tr><td>Mushroom Jack</td><td>5k→75k</td><td>Misc: shields, jewelry, belts, armor, weapons</td></tr>
                        <tr><td>Roshun the Traitor</td><td>5k→60k</td><td>Misc: seashells, glass, goblin cards, paintings, junk</td></tr>
                        <tr><td>Sir Coth</td><td>5k→60k</td><td>Metal slabs, metal armor</td></tr>
                        <tr><td>Tadion</td><td>2.5k→60k</td><td>Metal slabs, metal armor; vegetables; everything else reduced</td></tr>
                        <tr><td>Therese</td><td>2.5k→65k</td><td>Misc: books, scrolls, recipes; reduced</td></tr>
                        <tr><td>Velkort</td><td></td><td>Misc: fire dust, sulfur, saltpeter, potions, food; reduced</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Serbule Hills">
                  <summary>Serbule Hills</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Baroness Marith Felgard</td><td></td><td>Misc: seeds, brewing ingredients; everything at full price</td></tr>
                        <tr><td>Brianna Willer</td><td>1.5k→10.5k</td><td>Everything</td></tr>
                        <tr><td>Cleo Conyer</td><td>2.5k→30k</td><td>Misc: cooking ingredients, food</td></tr>
                        <tr><td>Durstin Tallow</td><td>2.5k→80k</td><td>Armor, weapons, jewelry</td></tr>
                        <tr><td>Paul Vaughn</td><td>10k→120k</td><td>Armor, weapons; recipes, skill books; everything else reduced</td></tr>
                        <tr><td>Sammie Grimspine</td><td>2.5k→40k</td><td>Armor, weapons, jewelry; furniture, wood, crates, dowels</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Serbule Crypt">
                  <summary>Serbule Crypt</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Sir Arif</td><td>6.25k→17.5k</td><td>Everything (limited)</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Myconian Cave">
                  <summary>Myconian Cave</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Way</td><td>2k→4k</td><td>Everything (limited pool)</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Eltibule">
                  <summary>Eltibule</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Helena Veilmoor</td><td>7.5k→80k</td><td>Armor, weapons</td></tr>
                        <tr><td>Hogan</td><td>10k→120k</td><td>Armor, weapons; alchemy, cooking, food, potions</td></tr>
                        <tr><td>Jesina</td><td>1k→3.5k</td><td>Everything (low per-item cap)</td></tr>
                        <tr><td>Jumjab</td><td>7.5k→100k</td><td>Armor, weapons; everything at full</td></tr>
                        <tr><td>Kalaba</td><td>5k→60k</td><td>Skinning knives, leather rolls, skins</td></tr>
                        <tr><td>Kleave</td><td>5k→50k</td><td>Misc: transmutation/augmentation, animal remnants, weapons, armor</td></tr>
                        <tr><td>Sie Antry</td><td>2.5k→10k</td><td>Armor, weapons; everything</td></tr>
                        <tr><td>Suspicious Cow</td><td>5k→15k</td><td>Everything (reduced)</td></tr>
                        <tr><td>Yetta</td><td>5k→60k</td><td>Armor, weapons, animal remnants; jewelry/amulets; everything at full</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Sun Vale">
                  <summary>Sun Vale</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Agrashab</td><td>5k→50k</td><td>Armor, weapons</td></tr>
                        <tr><td>Eleme</td><td></td><td>Food, recipes</td></tr>
                        <tr><td>Hiral</td><td></td><td>Misc: everything reduced, equipment</td></tr>
                        <tr><td>Kodan</td><td></td><td>Misc</td></tr>
                        <tr><td>Norbert</td><td></td><td>Misc</td></tr>
                        <tr><td>Preta</td><td></td><td>Misc</td></tr>
                        <tr><td>Spot</td><td></td><td>Misc</td></tr>
                        <tr><td>The Wombat</td><td></td><td>Misc</td></tr>
                        <tr><td>Yavazek</td><td></td><td>Misc</td></tr>
                        <tr><td>Yogzi</td><td></td><td>Misc</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Kur Mountains / Winter Nexus">
                  <summary>Kur Mountains / Winter Nexus</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Corey The Croaker</td><td></td><td>Jewelry, misc</td></tr>
                        <tr><td>Fazzi</td><td></td><td>Jewelry, misc</td></tr>
                        <tr><td>Jace Soral</td><td></td><td>Jewelry, misc; everything else reduced</td></tr>
                        <tr><td>Laura Neth</td><td></td><td>Misc; everything else reduced</td></tr>
                        <tr><td>Lamashu</td><td></td><td>Jewelry, misc</td></tr>
                        <tr><td>Syndra</td><td></td><td>Misc</td></tr>
                        <tr><td>Ukorga</td><td></td><td>Armor, weapons; jewelry</td></tr>
                        <tr><td>Urzab</td><td></td><td>Jewelry</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Kur Tower">
                  <summary>Kur Tower</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Glajur</td><td></td><td>Everything (reduced)</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Ilmari">
                  <summary>Ilmari</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Arlan</td><td></td><td>Misc; everything</td></tr>
                        <tr><td>Firaki</td><td></td><td>Misc; everything</td></tr>
                        <tr><td>Lumpfuzz</td><td></td><td>Misc; everything</td></tr>
                        <tr><td>Ragabir</td><td></td><td>Misc</td></tr>
                        <tr><td>Selaxi</td><td></td><td>Jewelry</td></tr>
                        <tr><td>Urzab</td><td></td><td>Jewelry</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Rahu">
                  <summary>Rahu</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Amutasa</td><td></td><td>Misc</td></tr>
                        <tr><td>Ashk the Answerer</td><td></td><td>Misc</td></tr>
                        <tr><td>Eveline Rastin</td><td></td><td>Armor, weapons; misc</td></tr>
                        <tr><td>Hirochi the Booklord</td><td></td><td>Misc</td></tr>
                        <tr><td>Ichin the Ice Master</td><td></td><td>Misc</td></tr>
                        <tr><td>Mandibles</td><td></td><td>Misc</td></tr>
                        <tr><td>Nishika</td><td></td><td>Misc</td></tr>
                        <tr><td>Otis</td><td></td><td>Misc</td></tr>
                        <tr><td>Raina</td><td></td><td>Jewelry</td></tr>
                        <tr><td>Rugen</td><td></td><td>Misc</td></tr>
                        <tr><td>Sirine</td><td></td><td>Misc</td></tr>
                        <tr><td>Tavilak</td><td></td><td>Jewelry, misc</td></tr>
                        <tr><td>Wintria Irasce</td><td></td><td>Misc</td></tr>
                        <tr><td>Willem Fangblade</td><td></td><td>Jewelry, misc</td></tr>
                        <tr><td>Zhao</td><td></td><td>Armor, weapons</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Red Wing Casino">
                  <summary>Red Wing Casino</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Kib the Unkillable</td><td></td><td>Armor, weapons</td></tr>
                        <tr><td>Eveline Rastin</td><td></td><td>Misc</td></tr>
                        <tr><td>Mandibles</td><td></td><td>Misc</td></tr>
                        <tr><td>Ragabir</td><td></td><td>Misc</td></tr>
                        <tr><td>Tavilak</td><td></td><td>Misc</td></tr>
                        <tr><td>Willem Fangblade</td><td></td><td>Jewelry</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Fae Realm">
                  <summary>Fae Realm</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Bendith the Banished</td><td></td><td>Misc</td></tr>
                        <tr><td>Felmer</td><td></td><td>Jewelry (enchanted elvish), misc</td></tr>
                        <tr><td>Floxie</td><td></td><td>Armor, weapons</td></tr>
                        <tr><td>Pegast</td><td></td><td>Armor, weapons</td></tr>
                        <tr><td>Raina</td><td></td><td>Jewelry</td></tr>
                        <tr><td>Solgribue</td><td></td><td>Misc</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="Povus">
                  <summary>Povus</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Dachak the Digger</td><td></td><td>Misc</td></tr>
                        <tr><td>Dog Ear</td><td></td><td>Misc</td></tr>
                        <tr><td>Errruka the Benefactor</td><td></td><td>Armor, weapons</td></tr>
                        <tr><td>Ferand Deftwhisper</td><td></td><td>Armor, weapons</td></tr>
                        <tr><td>Gerrux</td><td></td><td>Misc; everything</td></tr>
                        <tr><td>Tryaka</td><td></td><td>Misc; everything</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
                <details class="lvl tips-area-details" data-area="New Prestonbule Cave">
                  <summary>New Prestonbule Cave</summary>
                  <div class="tips-area-body">
                    <table class="tips-npc-table">
                      <thead><tr><th>NPC</th><th>Council (start→max)</th><th>Buys</th></tr></thead>
                      <tbody>
                        <tr><td>Bellema Deftwhisper</td><td></td><td>Armor, weapons; everything</td></tr>
                        <tr><td>Rick Snapley</td><td></td><td>Misc</td></tr>
                        <tr><td>Sona</td><td></td><td>Misc</td></tr>
                      </tbody>
                    </table>
                  </div>
                </details>
              </div>
            </div>
          </details>
          <details class="lvl tips-dropdown">
            <summary>Commands &amp; Emotes <button type="button" class="tips-pin-btn" onclick="event.preventDefault(); event.stopPropagation(); window.api?.openTipsCommandsPopup?.();" aria-label="Open in popup window">Open in window</button></summary>
            <div class="lvlBody tips-commands-list">
              <p class="muted">Slash commands and emotes from the chat window. Type in the chat/console; all commands start with <strong>/</strong>. Source: <a href="https://wiki.projectgorgon.com/wiki/User_Interface#The_Chat_Window_and_Commands" target="_blank" rel="noopener noreferrer">Project Gorgon Wiki — User Interface</a>.</p>

              <h3 class="tips-cmd-heading">General</h3>
              <table class="tips-cmd-table">
                <tbody>
                  <tr><td><code>/help</code></td><td>In-game list of available commands.</td></tr>
                </tbody>
              </table>

              <h3 class="tips-cmd-heading">Chat rooms</h3>
              <table class="tips-cmd-table">
                <tbody>
                  <tr><td><code>/rooms</code></td><td>List public chat rooms.</td></tr>
                  <tr><td><code>/join Custom1</code></td><td>Join room "Custom1"; creates it if empty.</td></tr>
                  <tr><td><code>/join -Custom1</code></td><td>Join/create private room (hidden from /rooms).</td></tr>
                  <tr><td><code>/leave Custom1</code></td><td>Leave a chat room.</td></tr>
                  <tr><td><code>/c hi</code></td><td>Speak in last custom room used.</td></tr>
                  <tr><td><code>/c OtherRoom hi</code></td><td>Speak in room "OtherRoom".</td></tr>
                </tbody>
              </table>

              <h3 class="tips-cmd-heading">Social &amp; messaging</h3>
              <table class="tips-cmd-table">
                <tbody>
                  <tr><td><code>/t PlayerName hi</code></td><td>Private message (tell) to PlayerName.</td></tr>
                  <tr><td><code>/r hello</code></td><td>Reply to last /t sender.</td></tr>
                  <tr><td><code>/g morning!</code></td><td>Global chat (all zones).</td></tr>
                  <tr><td><code>/n hello</code></td><td>Nearby chat (local).</td></tr>
                  <tr><td><code>/p hello</code></td><td>Party/group chat.</td></tr>
                  <tr><td><code>/a hello</code></td><td>Guild chat.</td></tr>
                </tbody>
              </table>

              <h3 class="tips-cmd-heading">Players &amp; restrictions</h3>
              <table class="tips-cmd-table">
                <tbody>
                  <tr><td><code>/friend PlayerName</code></td><td>Send friend request.</td></tr>
                  <tr><td><code>/unfriend PlayerName</code></td><td>Remove from friends.</td></tr>
                  <tr><td><code>/ignore</code></td><td>Show ignored players.</td></tr>
                  <tr><td><code>/ignore PlayerName</code></td><td>Ignore all from PlayerName.</td></tr>
                  <tr><td><code>/unignore PlayerName</code></td><td>Stop ignoring.</td></tr>
                  <tr><td><code>/incognito</code></td><td>Toggle; hide from online lists (persists).</td></tr>
                  <tr><td><code>/who</code></td><td>Players in your current area.</td></tr>
                  <tr><td><code>/who all</code></td><td>All players online (up to 100).</td></tr>
                  <tr><td><code>/restrict</code></td><td>List restriction options.</td></tr>
                  <tr><td><code>/restrict FriendInvite on</code></td><td>Block friend requests (use <code>off</code> to allow).</td></tr>
                  <tr><td><code>/restrict GroupInvite on</code></td><td>Block group invites.</td></tr>
                  <tr><td><code>/restrict GuildInvite on</code></td><td>Block guild invites.</td></tr>
                  <tr><td><code>/restrict Trade on</code></td><td>Block trade requests.</td></tr>
                  <tr><td><code>/restrict ReceiveTips on</code></td><td>Block tips.</td></tr>
                  <tr><td><code>/tip PlayerName 100</code></td><td>Send 100 coins to PlayerName (must be nearby).</td></tr>
                </tbody>
              </table>

              <h3 class="tips-cmd-heading">Guilds</h3>
              <table class="tips-cmd-table">
                <tbody>
                  <tr><td><code>/guild help</code></td><td>Guild commands you can use.</td></tr>
                  <tr><td><code>/guild who</code></td><td>Online guild members.</td></tr>
                  <tr><td><code>/guild invite PlayerName</code></td><td>Invite to guild.</td></tr>
                  <tr><td><code>/guild kick PlayerName</code></td><td>Kick (needs kick privilege).</td></tr>
                  <tr><td><code>/guild message something</code></td><td>Set guild message of the day.</td></tr>
                  <tr><td><code>/guild rank PlayerName Member</code></td><td>Set rank (needs privilege).</td></tr>
                  <tr><td><code>/guild auditlogs</code></td><td>Guild logs (Rank 9/10). Add <code>old</code> for previous week.</td></tr>
                </tbody>
              </table>

              <h3 class="tips-cmd-heading">Hunting groups</h3>
              <table class="tips-cmd-table">
                <tbody>
                  <tr><td><code>/invite PlayerName</code></td><td>Invite to party.</td></tr>
                  <tr><td><code>/loot free</code></td><td>Everyone can loot every corpse.</td></tr>
                  <tr><td><code>/loot turns</code></td><td>Group takes turns looting non-Elites.</td></tr>
                  <tr><td><code>/loot unchecked</code></td><td>Anyone can loot (even outside group).</td></tr>
                </tbody>
              </table>

              <h3 class="tips-cmd-heading">Other commands</h3>
              <table class="tips-cmd-table">
                <tbody>
                  <tr><td><code>/age</code></td><td>Character stats: created, time online, deaths, damage.</td></tr>
                  <tr><td><code>/wiki something</code></td><td>Search wiki in browser.</td></tr>
                  <tr><td><code>/swiki something</code></td><td>Search wiki in Steam browser.</td></tr>
                  <tr><td><code>/forum something</code></td><td>Open forum search in browser.</td></tr>
                  <tr><td><code>/isearch Salt</code></td><td>Search external storage (NPC, chests) for items. <code>/isearch +Salt</code> = exact name.</td></tr>
                  <tr><td><code>/messages</code></td><td>Message of the day and system messages.</td></tr>
                  <tr><td><code>/redeem</code></td><td>Special item vouchers you can redeem.</td></tr>
                  <tr><td><code>/roll 2d6</code></td><td>Roll dice (e.g. two d6).</td></tr>
                  <tr><td><code>/status</code></td><td>Server status, uptime, ping.</td></tr>
                  <tr><td><code>/stuck</code></td><td>Try to unstick your character.</td></tr>
                  <tr><td><code>/wordhunt</code></td><td>Word-hunt minigame.</td></tr>
                  <tr><td><code>/entitle Bob</code></td><td>Give your custom title to player Bob (nearby).</td></tr>
                  <tr><td><code>/leavetut</code></td><td>Leave tutorial island.</td></tr>
                </tbody>
              </table>

              <h3 class="tips-cmd-heading">Emotes</h3>
              <p class="muted" style="margin-bottom:6px;">Visual animations only; no game effect (e.g. /sit does not increase regen).</p>
              <table class="tips-cmd-table">
                <tbody>
                  <tr><td><code>/brag</code></td><td><code>/cheer</code></td><td><code>/cry</code></td><td><code>/howl</code></td><td><code>/jeer</code></td><td><code>/laugh</code></td></tr>
                  <tr><td><code>/nap</code></td><td><code>/read</code></td><td><code>/sit</code></td><td><code>/smith</code></td><td><code>/stretch</code></td><td><code>/taunt</code></td></tr>
                  <tr><td><code>/thank</code></td><td><code>/wave</code></td><td><code>/e text</code> or <code>/em text</code></td><td colspan="3">Custom emote; use <code>%t</code> for target.</td></tr>
                </tbody>
              </table>

              <h3 class="tips-cmd-heading">Unlisted commands</h3>
              <table class="tips-cmd-table">
                <tbody>
                  <tr><td><code>/mapclear</code></td><td>Remove all map pins.</td></tr>
                  <tr><td><code>/unstickchar &lt;name&gt;</code></td><td>On another character: move stuck character to Anagoge.</td></tr>
                  <tr><td><code>/behaviorreport</code></td><td>Behavior Report window (e.g. for challenges).</td></tr>
                  <tr><td><code>/zapresourcesicefishing</code></td><td>Remove deployed icefishing traps (confirm with code). Also: <code>brewing</code>, <code>fletching</code>, <code>cheesemaking</code>, <code>mushroomfarming</code>.</td></tr>
                  <tr><td><code>/particlespam</code></td><td>Toggle particle effects (e.g. world bosses).</td></tr>
                </tbody>
              </table>

              <p class="muted" style="margin-top:12px; font-size:12px;">Tip: In the Sell tab, hover over the NPC’s money amount to see when their vendor cash resets. Use <strong>Shift</strong> when buying to buy multiple; <strong>Shift</strong> when selling to sell one item instead of the stack.</p>
            </div>
          </details>
        </section>

        <section class="page" id="page-instructions">
          <h1>Instructions</h1>
          <p>Pie Guy Guide is a companion app for <strong>Project Gorgon</strong>. Use the sidebar to switch sections. This page explains every feature and how to use the app.</p>

          <div class="instructions-block">
            <h2>Getting started</h2>
            <p>After opening the app, the main window stays on top of other windows so you can keep it beside the game. You can <strong>drag the window</strong> by the top bar (where the title and search box are). Use the <strong>sidebar on the left</strong> to open different sections: Home, Maps, Dungeons, Leveling, Boss Timer, Casino Daily, Tips, and About.</p>
            <p>At the bottom of the sidebar you can adjust <strong>Opacity</strong> for the whole app (and any open overlay). Use the <strong>—</strong> button in the top-right to minimize the app to the system tray; click the tray icon to restore it.</p>
          </div>

          <div class="instructions-block">
            <h2>Hotkeys</h2>
            <ul>
              <li><strong>F7</strong> — Minimize the main window to the tray, or restore it from the tray.</li>
              <li><strong>F6</strong> — When a map or dungeon overlay is open: toggle the overlay UI. By default only the map is shown; press F6 to show the map/dungeon dropdown, title bar, and Close button.</li>
              <li><strong>F8</strong> — When a map or dungeon overlay is open: toggle <em>click-through</em> so the overlay ignores the mouse and you can click the game underneath.</li>
              <li><strong>ESC</strong> — When a map or dungeon overlay is open: close the overlay and restore the main app window.</li>
            </ul>
          </div>

          <div class="instructions-block">
            <h2>Options (gear icon)</h2>
            <p>Click the <strong>⚙ Options</strong> button in the top bar to open:</p>
            <ul>
              <li><strong>Anchor map &amp; dungeon to top right</strong> — If checked, when you open the map or dungeon overlay it is placed at the top-right of your screen (or, if Project Gorgon is running, at the top-right of the game window). If unchecked, the overlay opens in the center of the screen.</li>
              <li><strong>Your in-game name (LFG)</strong> — Your <strong>character name</strong> in Project Gorgon. You must use your real in-game character name for LFG to work (see LFG section below).</li>
              <li><strong>LFG server URL</strong> — The base URL of the LFG API (e.g. <code>http://localhost:3765</code> if you run the included server locally). Leave blank or set to a community LFG server if one is provided.</li>
              <li><strong>Game server</strong> — Your Project Gorgon server: <strong>Miraverre</strong>, <strong>Strekios</strong>, <strong>Dreva</strong>, or <strong>Arisetsu</strong>. LFG posts are grouped by server.</li>
              <li><strong>Theme</strong> — Choose a theme (Dark Mode, Dark Red, Normal, Ocean, Forest, Purple, Sunset, or Slate) for the app’s appearance. Your choice is saved.</li>
              <li><strong>Account</strong> — If configured, you can <strong>Login with Discord</strong> to save your character name and server to your account. When logged in, changing these in Options syncs them to your account so they’re available on other devices or after reinstalling.</li>
            </ul>
          </div>

          <div class="instructions-block">
            <h2>Account (optional)</h2>
            <p>If the app is configured with a Supabase project, an <strong>Account</strong> section appears in Options. You can <strong>Login with Discord</strong> to link your Discord account. When logged in, your <strong>character name</strong> and <strong>game server</strong> (and LFG server URL) are saved to your account. They sync when you change them in Options, and when you log in on another device or after reinstalling, the app can load these settings so you don’t have to re-enter them.</p>
          </div>

          <div class="instructions-block">
            <h2>Wiki search (top bar)</h2>
            <p>Use the search box in the top bar to search the <strong>Project Gorgon Wiki</strong>. Results appear below the box; click a result to open that wiki page in your browser. Press <strong>ESC</strong> in the search box to clear and close results.</p>
          </div>

          <div class="instructions-block">
            <h2>Home</h2>
            <p>The Home page shows recent <strong>Project Gorgon patch notes</strong> (update notes) loaded from the game’s news feed. Click <strong>Refresh</strong> to load the latest. Use this to stay up to date with game changes without leaving the app.</p>
          </div>

          <div class="instructions-block">
            <h2>Maps</h2>
            <p>The Maps section lets you open a <strong>map overlay</strong> that floats over the game. Click <strong>Open Map Overlay</strong> to open it. The main app minimizes to the tray while the overlay is open.</p>
            <ul>
              <li>Set <strong>Current zone (player location)</strong> on the Maps page to your in-game zone. The overlay will switch to that map when you open it (or when you change the selection). A green <strong>player icon</strong> shows your position.</li>
              <li>If the icon is off, <strong>drag the player icon</strong> on the overlay to the correct spot; the position is saved per zone.</li>
              <li>Enable <strong>Track from game minimap</strong> in the overlay sidebar to try to move the icon automatically by reading the game window's minimap (Project Gorgon must be running).</li>
              <li>In the overlay you can <strong>choose a map</strong> from the dropdown (e.g. Serbule, Eltibule, Gazluk).</li>
              <li>Use the <strong>Opacity</strong> slider in the overlay to make the map image more or less see-through.</li>
              <li><strong>Drag</strong> the map to pan; use the <strong>mouse wheel</strong> to zoom in and out.</li>
              <li>Enable <strong>Click-through</strong> (or press <strong>F8</strong>) so you can click the game under the overlay.</li>
              <li>By default only the map image is visible. Press <strong>F6</strong> to show the map dropdown, opacity, and Close button.</li>
              <li>Press <strong>ESC</strong> to close the overlay and bring back the main app.</li>
            </ul>
          </div>

          <div class="instructions-block">
            <h2>Dungeons</h2>
            <p>The Dungeons section works like Maps: click <strong>Open Dungeon Overlay</strong> to open a floating overlay with <strong>dungeon maps/layouts</strong>. Set <strong>Current dungeon (player location)</strong> on the Dungeons page to see a green <strong>player icon</strong> on that dungeon’s map when the overlay matches. You can switch dungeons from the dropdown, adjust opacity, drag to pan, and zoom with the mouse wheel. The same hotkeys apply: <strong>ESC</strong> to close, <strong>F6</strong> to show dungeon selection and window, <strong>F8</strong> for click-through.</p>
          </div>

          <div class="instructions-block">
            <h2>LFG (Looking for Group)</h2>
            <p>The <strong>LFG</strong> section lets you find or form groups by server. You can create a post (e.g. “Running Gazluk, need DPS”) and others can mark themselves as interested, or you can browse posts and join as interested.</p>
            <p><strong>Important:</strong> You must use your <strong>actual in-game character name</strong> for LFG to work. Set <strong>Your in-game name (LFG)</strong> in Options (or in the Connect modal on the LFG page) to the same name as your character in Project Gorgon. Other players will see this name when you post or mark interested, and the system allows only one post per character per server.</p>
            <ul>
              <li><strong>Connect</strong> — If you haven’t set a character name and server yet, click <strong>Connect</strong> to open the same form (character name + server). Choose your server: <strong>Miraverre</strong>, <strong>Strekios</strong>, <strong>Dreva</strong>, or <strong>Arisetsu</strong>.</li>
              <li><strong>Server tabs</strong> — Use the tabs (Miraverre, Strekios, Dreva, Arisetsu) to switch which server’s posts you’re viewing. Your selected server in Options determines which server you post to when you create a new post.</li>
              <li><strong>Create a post</strong> — Enter a description, optional tags and language, and number of slots. Your post appears under the current server. Only one post per character per server is allowed.</li>
              <li><strong>Interested</strong> — Click <strong>Interested</strong> on a post to add your character name to the list. The poster (and you) can remove you from the list if needed.</li>
              <li><strong>LFG server URL</strong> — The app talks to an LFG API. Set the <strong>LFG server URL</strong> in Options (e.g. a community host or <code>http://localhost:3765</code> if you run the included server). If the URL is wrong or the server is down, loading or posting will fail.</li>
            </ul>
          </div>

          <div class="instructions-block">
            <h2>Leveling</h2>
            <p>The Leveling Guide lists <strong>best areas to level</strong> in Project Gorgon by level bracket (0–10, 5–20, 20–40, and so on). Expand a bracket to read details. When a bracket has more than one area, use the <strong>Area</strong> dropdown to switch between options (e.g. Serbule Hills, Serbule Crypt, Goblin Dungeon). Click <strong>Quick reference</strong> at the top right to open the summary table in a <strong>popout window</strong> (like Maps or Dungeons), so you can keep it visible over the game. The main app minimizes to the tray while the quick reference window is open. Press <strong>ESC</strong> or click <strong>Close</strong> to close the popout.</p>
          </div>

          <div class="instructions-block">
            <h2>Boss Timer</h2>
            <p>Track when bosses respawn. Open the <strong>Boss Timer</strong> section from the sidebar. When you or your group kill a boss, click <strong>Killed</strong> for that boss to start the timer. The countdown uses the respawn time you select (e.g. 2 hours). Timers are saved locally and persist across sessions. Respawn times are estimates; use the dropdown to change them if you know a different value.</p>
          </div>

          <div class="instructions-block">
            <h2>Tips</h2>
            <p>General <strong>gameplay tips</strong> for Project Gorgon: food buffs, foraging, inventory management, and similar advice. The Tips section has expandable dropdowns for <strong>Vendors Council</strong> (when vendor sell limits reset), <strong>Who buys what</strong> (NPC shops by area), and <strong>Commands &amp; Emotes</strong> (chat slash commands and emotes). You can <strong>pin</strong> any of these dropdowns to a <strong>separate popup window</strong>: click <strong>Open in window</strong> next to the dropdown title. The popup behaves like the Leveling quick reference — it stays on top, the main app minimizes to the tray while it’s open, and you can close it with <strong>ESC</strong> or the Close button. Use this to keep vendor or NPC info visible over the game.</p>
          </div>

          <div class="instructions-block">
            <h2>About</h2>
            <p>Shows the app <strong>version</strong>, a short description of Pie Guy Guide, a link to <strong>Discord</strong>, and a <strong>Check for updates</strong> button. Updates are applied in-place when available.</p>
          </div>
        </section>

        <!-- DEFAULT PAGE -->
        <section class="page aboutPage" id="page-about">
          <h1>About</h1>
          <div class="updateBanner hidden" id="updateBanner">
            <span class="updateBanner-text" id="updateBannerText"></span>
            <button class="primary updateBanner-btn" id="updateRestartBtn" style="display:none;">Restart to update</button>
          </div>
          <div class="aboutBox">
            <p class="aboutText">Pie Guy Guide is a companion app for <strong>Project: Gorgon</strong>. It provides map and dungeon overlays, wiki search, leveling tips, boss timers, casino dailies, and vendor tips—all in one window so you can keep focus on the game.</p>
            <p class="aboutLinks">
              <a class="discord" href="https://discord.gg/sRDMFWk9" target="_blank" rel="noopener noreferrer">Join Our Discord</a>
            </p>
            <div class="aboutUpdates">
              <span class="aboutVersion" id="appVersion">v —</span>
              <button type="button" class="primary aboutCheckBtn" id="checkUpdatesBtn">Check for updates</button>
            </div>
            <p class="aboutReleasesNote muted">Updates are applied in-place (no full installer each time). If you're on an older setup, download the latest from <a href="https://github.com/showuptoscene98/pie-guy-guide/releases" target="_blank" rel="noopener noreferrer">Releases</a> once.</p>
            <p class="aboutCredit muted">By Mewoicles · MIT License</p>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Update available popup -->
  <div class="updateModal hidden" id="updateModal">
    <div class="updateModal-backdrop"></div>
    <div class="updateModal-box">
      <h2 class="updateModal-title" id="updateModalTitle">Update available</h2>
      <p class="updateModal-text" id="updateModalText"></p>
      <div class="updateModal-actions">
        <button type="button" class="primary updateModal-btn updateModal-btn-secondary" id="updateModalLater">Later</button>
        <button type="button" class="primary updateModal-btn updateModal-btn-primary" id="updateModalRestart" style="display:none;">Restart to update</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
  <script type="module" src="auth-supabase.js"></script>
</body>
</html>
