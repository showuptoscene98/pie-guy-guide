<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Pie Guy Guide</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body data-theme="dark-red">
  <div class="app">

    <!-- Topbar (drag region) -->
    <div class="topbar">
      <div class="topbar-left">
        <div class="topbar-title">Pie Guy Guide</div>
        <div class="topbar-sub">Project Gorgon Companion</div>
      </div>

      <div class="topbar-search-wrap" id="wikiSearchWrap">
        <input type="search" class="topbar-search" id="wikiSearchInput" placeholder="Search Project Gorgon Wiki…" autocomplete="off" />
        <div class="topbar-search-results hidden" id="wikiSearchResults"></div>
      </div>

      <div class="topbar-controls">
        <div class="options-wrap">
          <button type="button" class="topbtn topbtn-options" id="optionsCogBtn" title="Options" aria-label="Options">⚙</button>
          <div class="options-dropdown hidden" id="optionsDropdown">
            <div class="options-dropdown-title">Options</div>
            <label class="options-dropdown-item">
              <input type="checkbox" id="optionAnchorOverlays" checked />
              <span>Anchor map & dungeon to top right</span>
            </label>
            <div class="options-dropdown-item options-theme-row">
              <label for="optionTheme">Theme</label>
              <select id="optionTheme" aria-label="Theme">
                <option value="dark">Dark Mode</option>
                <option value="dark-red" selected>Dark Red</option>
                <option value="normal">Normal</option>
              </select>
            </div>
          </div>
        </div>
        <button type="button" class="topbtn" onclick="window.api?.mainMinimize?.()">—</button>
        <button type="button" class="topbtn danger" onclick="window.api?.mainClose?.()">✕</button>
      </div>
    </div>

    <div class="layout">
      <!-- Hover-slide sidebar -->
      <aside class="sidebar" aria-label="Sidebar Navigation">
        <div class="side-head">
          <img src="assets/logo.png" class="logo" alt="Pie Guy" draggable="false" />
          <div class="brand">
            <div class="brand-name">Pie Guy</div>
            <div class="brand-sub">Guide & Overlays</div>
          </div>
        </div>

        <nav class="nav">
          <button class="navBtn" id="navHome" onclick="go('home')">
            <img class="icon" src="assets/icons/home.png" alt="" draggable="false" />
            <span class="label">Home</span>
          </button>

          <button class="navBtn" id="navMaps" onclick="go('maps')">
            <img class="icon" src="assets/icons/maps.png" alt="" draggable="false" />
            <span class="label">Maps</span>
          </button>

          <button class="navBtn" id="navDungeons" onclick="go('dungeons')">
            <img class="icon" src="assets/icons/dungeons.png" alt="" draggable="false" />
            <span class="label">Dungeons</span>
          </button>

          <button class="navBtn" id="navLeveling" onclick="go('leveling')">
            <img class="icon" src="assets/icons/leveling.png" alt="" draggable="false" />
            <span class="label">Leveling</span>
          </button>

          <button class="navBtn" id="navTips" onclick="go('tips')">
            <img class="icon" src="assets/icons/tips.png" alt="" draggable="false" />
            <span class="label">Tips</span>
          </button>

          <button class="navBtn" id="navInstructions" onclick="go('instructions')">
            <img class="icon" src="assets/icons/about.png" alt="" draggable="false" />
            <span class="label">Instructions</span>
          </button>

          <button class="navBtn" id="navAbout" onclick="go('about')">
            <img class="icon" src="assets/icons/about.png" alt="" draggable="false" />
            <span class="label">About</span>
          </button>
        </nav>

        <div class="side-foot">
          <div class="sidebar-opacity">
            <label for="opacitySlider" class="sidebar-opacity-label">Opacity</label>
            <input type="range" id="opacitySlider" class="sidebar-opacity-slider" min="30" max="100" value="100" />
            <span class="sidebar-opacity-value" id="opacityValue">100%</span>
          </div>
          <div class="hotkeys">
            <div class="hotkeys-title">Hotkeys</div>
            <div>F7: Minimize/Restore</div>
            <div>Overlay: ESC closes, F6 title bar, F8 click-through</div>
          </div>
        </div>
      </aside>

      <!-- Main content area -->
      <main class="content">
        <section class="page" id="page-home">
          <h1>Home</h1>
          <p>Welcome to Pie Guy Guide. Use the sidebar to navigate.</p>
          <div class="home-updates">
            <div class="home-updates-brand">
              <img src="assets/logo.png" alt="Pie Guy" class="home-updates-logo" />
              <h2 class="home-updates-patch-title">Patch notes</h2>
            </div>
            <div class="home-updates-head">
              <button type="button" class="primary home-updates-refresh" id="pgNewsRefresh">Refresh</button>
            </div>
            <div class="home-updates-list" id="pgNewsList">
              <div class="home-updates-loading muted hidden" id="pgNewsLoading">Loading update notes…</div>
              <div class="home-updates-error hidden" id="pgNewsError"></div>
            </div>
          </div>
        </section>

        <section class="page" id="page-maps">
          <h1>Maps</h1>
          <p>Click to open the map overlay. Main app minimizes until you press ESC.</p>
          <div class="row row-gap">
            <div>
              <label for="currentMapZoneSelect" class="block-label">Current zone (player location)</label>
              <select id="currentMapZoneSelect" aria-label="Current zone"></select>
            </div>
            <button type="button" class="primary" onclick="window.api?.openMap?.()">Open Map Overlay</button>
          </div>
          <p class="muted">Set your current zone to show a player icon on the map overlay when that map is open.</p>
          <p class="muted">Map images are updated as new resources become available.</p>
        </section>

        <section class="page" id="page-dungeons">
          <h1>Dungeons</h1>
          <p>Future dungeon layouts will be added as new dungeons are released.</p>
          <div class="row row-gap">
            <div>
              <label for="currentDungeonZoneSelect" class="block-label">Current dungeon (player location)</label>
              <select id="currentDungeonZoneSelect" aria-label="Current dungeon"></select>
            </div>
            <button type="button" class="primary" onclick="window.api?.openDungeon?.()">Open Dungeon Overlay</button>
          </div>
          <p class="muted">Set your current dungeon to show a player icon on the dungeon overlay when that dungeon is open.</p>
        </section>

<section class="page" id="page-leveling">
  <h1>Leveling Guide</h1>
  <p class="muted">Broken down by level brackets. Open a section to read the route.</p>

  <div class="leveling">

    <details class="lvl" open>
      <summary>0–10 (Anagoge)</summary>
      <div class="lvlBody">
        <p>I do not recommend leaving Angague until your combat skills are at least level 10. After level 5, you can easily move into the island's dungeon and down into the spider cave. The cave is huge, and it's a great place to grind. Don't bother picking up armor to later sell. Focus on things that stack and have value: strange dirt, femurs, and spider webs.</p>
      </div>
    </details>

    <details class="lvl">
      <summary>5–15(Dream Ilamari Desert)</summary>
      <div class="lvlBody">
        <p><strong>5-15 only!</strong> Go to the gold portal right outside of Serbule Keep this will transport you to a nerfed Ilamari Desert. Speak with Mirravere to begin the quest and look out for mobs with a crown above their head for grind quest. This is fastest way for 5-15 on a beginner character</p>

       </div>
    </details>

    <details class="lvl">
      <summary>15–20 (Serbule Crypt)</summary>
      <div class="lvlBody">

        <p>After completing Dream Ilamari Desert until atleast level 12, you can move directly to the Serbule Crypt. It's SW of Serbule in the corner. If the dungeon itself is too hard for you, the area outdoors has a number of skeletons around that are easy targets. Archers are the easiest to kill.</p>

        <p><strong>@20</strong> Stay in Serbule Crypt. Spiders should be easy. Some of the harder undead should be just on the edge of your ability. Further down the undead hallway, between the giant undead boss and the rhino, is a hallway full of deer, ice elementals, and undead. This is a prime spot to grind since it doesn't have much foot traffic.</p>
      </div>
    </details>

    <details class="lvl">
      <summary>20–40</summary>
      <div class="lvlBody">
        <p>It's time to head for Eltibule. Keep an eye out for mobs with a silver crown. If you're not familiar with the mechanic, killing such a mob will grant you a kill quest for similar mobs. They're good xp at lower levels, and you're going to grind this content anyway.</p>

        <p>From the drop, stay to your left. This area is full of wolves, panthers, green spiders, and fire spiders. Fire spiders may be a bit too much for you at first, but you should be able to handle the rest. It's a perfect time to also work on your mycology, myconic, and foraging skills.</p>

        <p><strong>@25 – 30 The Myconian Cave.</strong> You need a minimum of 8 myconic, and I recommend 10. It's time to go to the Myconian Cave. There are mushrooms distributed around northern Serbule that when talked to, will teleport you inside the dungeon. The location of these mushrooms changes every few hours, so it can take a little running around to locate them. Avoid the bosses unless you have a group. Their curses are particularly bad.</p>

        <p><strong>@30 – 35 The Goblin Dungeon in Serbule.</strong> This is one of the greatest dungeons in the game. It's huge, and it's well-structured. Easier mobs are up top, but as you descend down you'll find that it gets more difficult. It's a perfect place to grind all the way from 40–45. If you have a group capable of defeating the Fog, venture further in and take a left when the path splits. You'll find a series of three rooms with elementals guarding red crystals. If you kill the crystals, then the elementals disappear and stop spawning. <strong>Do not kill the red crystals</strong> and you have a fast-spawning feed of high-xp mobs available for your group to farm.</p>
      </div>
    </details>

    <details class="lvl">
      <summary>40–60</summary>
      <div class="lvlBody">
        <p>It's time to go to Kur Tower. The portal is a short run from where the portal to Kur (in Eltibule) will drop you. If you die, that's fine, just try again. There's no cold damage inside. You can easily grind from 40–60 here, and there's often folks inside to group with.</p>
      </div>
    </details>

    <details class="lvl">
      <summary>60–70</summary>
      <div class="lvlBody">
        <p>You're almost there. It's time to grind out the last levels in the Wolf Cave, which is also located in Kur. You can make a good deal of money here by skinning the werewolves, so keep a skinning knife on you.</p>
      </div>
    </details>

  </div>
</section>


        <section class="page" id="page-tips">
          <h1>Tips</h1>
          <ul>
            <li>Keep food buffs up for faster progress and health regen.</li>
            <li>Train foraging alongside combat this will help in the endgame.</li>
            <li>Sell often to keep inventory clean and free up space be mindful of the npc you sell they have limited coins</li>
          </ul>
        </section>

        <section class="page" id="page-instructions">
          <h1>Instructions</h1>
          <p>Pie Guy Guide is a companion app for <strong>Project Gorgon</strong>. Use the sidebar to switch sections. This page explains every feature and how to use the app.</p>

          <div class="instructions-block">
            <h2>Getting started</h2>
            <p>After opening the app, the main window stays on top of other windows so you can keep it beside the game. You can <strong>drag the window</strong> by the top bar (where the title and search box are). Use the <strong>sidebar on the left</strong> to open different sections: Home, Maps, Dungeons, Leveling, Tips, and About.</p>
            <p>At the bottom of the sidebar you can adjust <strong>Opacity</strong> for the whole app (and any open overlay). Use the <strong>—</strong> button in the top-right to minimize the app to the system tray; click the tray icon to restore it.</p>
          </div>

          <div class="instructions-block">
            <h2>Hotkeys</h2>
            <ul>
              <li><strong>F7</strong> — Minimize the main window to the tray, or restore it from the tray.</li>
              <li><strong>F6</strong> — When a map or dungeon overlay is open: toggle the overlay title bar between visible (dark bar) and transparent (only text over the game).</li>
              <li><strong>F8</strong> — When a map or dungeon overlay is open: toggle <em>click-through</em> so the overlay ignores the mouse and you can click the game underneath.</li>
              <li><strong>ESC</strong> — When a map or dungeon overlay is open: close the overlay and restore the main app window.</li>
            </ul>
          </div>

          <div class="instructions-block">
            <h2>Options (gear icon)</h2>
            <p>Click the <strong>⚙ Options</strong> button in the top bar to open:</p>
            <ul>
              <li><strong>Anchor map &amp; dungeon to top right</strong> — If checked, when you open the map or dungeon overlay it is placed at the top-right of your screen (or, if Project Gorgon is running, at the top-right of the game window). If unchecked, the overlay opens in the center of the screen.</li>
              <li><strong>Theme</strong> — Choose <em>Dark Mode</em>, <em>Dark Red</em>, or <em>Normal</em> for the app’s appearance. Your choice is saved.</li>
            </ul>
          </div>

          <div class="instructions-block">
            <h2>Wiki search (top bar)</h2>
            <p>Use the search box in the top bar to search the <strong>Project Gorgon Wiki</strong>. Results appear below the box; click a result to open that wiki page in your browser. Press <strong>ESC</strong> in the search box to clear and close results.</p>
          </div>

          <div class="instructions-block">
            <h2>Home</h2>
            <p>The Home page shows recent <strong>Project Gorgon patch notes</strong> (update notes) loaded from the game’s news feed. Click <strong>Refresh</strong> to load the latest. Use this to stay up to date with game changes without leaving the app.</p>
          </div>

          <div class="instructions-block">
            <h2>Maps</h2>
            <p>The Maps section lets you open a <strong>map overlay</strong> that floats over the game. Click <strong>Open Map Overlay</strong> to open it. The main app minimizes to the tray while the overlay is open.</p>
            <ul>
              <li>Set <strong>Current zone (player location)</strong> on the Maps page to your in-game zone. The overlay will switch to that map when you open it (or when you change the selection). A green <strong>player icon</strong> shows your position.</li>
              <li>If the icon is off, <strong>drag the player icon</strong> on the overlay to the correct spot; the position is saved per zone.</li>
              <li>Enable <strong>Track from game minimap</strong> in the overlay sidebar to try to move the icon automatically by reading the game window's minimap (Project Gorgon must be running).</li>
              <li>In the overlay you can <strong>choose a map</strong> from the dropdown (e.g. Serbule, Eltibule, Gazluk).</li>
              <li>Use the <strong>Opacity</strong> slider in the overlay to make the map image more or less see-through.</li>
              <li><strong>Drag</strong> the map to pan; use the <strong>mouse wheel</strong> to zoom in and out.</li>
              <li>Enable <strong>Click-through</strong> (or press <strong>F8</strong>) so you can click the game under the overlay.</li>
              <li>Press <strong>F6</strong> to make the overlay title bar transparent so only the map image is visible over the game.</li>
              <li>Press <strong>ESC</strong> to close the overlay and bring back the main app.</li>
            </ul>
          </div>

          <div class="instructions-block">
            <h2>Dungeons</h2>
            <p>The Dungeons section works like Maps: click <strong>Open Dungeon Overlay</strong> to open a floating overlay with <strong>dungeon maps/layouts</strong>. Set <strong>Current dungeon (player location)</strong> on the Dungeons page to see a green <strong>player icon</strong> on that dungeon’s map when the overlay matches. You can switch dungeons from the dropdown, adjust opacity, drag to pan, and zoom with the mouse wheel. The same hotkeys apply: <strong>ESC</strong> to close, <strong>F6</strong> for title bar transparency, <strong>F8</strong> for click-through.</p>
          </div>

          <div class="instructions-block">
            <h2>Leveling</h2>
            <p>The Leveling Guide is a <strong>text guide</strong> with level brackets (e.g. 0–10, 15–20, 40–60). Click a bracket to expand it and read the recommended areas and tips for that range. Only one bracket is open at a time. Use it as a reference while leveling in Project Gorgon.</p>
          </div>

          <div class="instructions-block">
            <h2>Tips</h2>
            <p>General <strong>gameplay tips</strong> for Project Gorgon: food buffs, foraging, inventory management, and similar advice. Quick reference for in-game habits that help progress.</p>
          </div>

          <div class="instructions-block">
            <h2>About</h2>
            <p>Shows the app <strong>version</strong>, a link to <strong>join the Discord</strong> community, and a <strong>Check for updates</strong> button. If an update is available, you can download it and restart the app to install. The update banner and modal will guide you.</p>
          </div>
        </section>

        <!-- DEFAULT PAGE -->
        <section class="page aboutPage" id="page-about">
          <h1>About</h1>
          <div class="updateBanner hidden" id="updateBanner">
            <span class="updateBanner-text" id="updateBannerText"></span>
            <button class="primary updateBanner-btn" id="updateRestartBtn" style="display:none;">Restart to update</button>
          </div>
          <div class="aboutBox">
            <p class="aboutText">Come Join us in the multi-game family that has grown over the years!</p>
            <a class="discord" href="https://discord.gg/sRDMFWk9" target="_blank">Join Our Discord</a>
            <div class="aboutUpdates">
              <span class="aboutVersion" id="appVersion">v —</span>
              <button type="button" class="primary aboutCheckBtn" id="checkUpdatesBtn">Check for updates</button>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Update available popup -->
  <div class="updateModal hidden" id="updateModal">
    <div class="updateModal-backdrop"></div>
    <div class="updateModal-box">
      <h2 class="updateModal-title" id="updateModalTitle">Update available</h2>
      <p class="updateModal-text" id="updateModalText"></p>
      <div class="updateModal-actions">
        <button type="button" class="primary updateModal-btn updateModal-btn-secondary" id="updateModalLater">Later</button>
        <button type="button" class="primary updateModal-btn updateModal-btn-primary" id="updateModalRestart" style="display:none;">Restart to update</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
